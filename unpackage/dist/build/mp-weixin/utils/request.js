"use strict";const e=require("../common/vendor.js");exports.request=t=>{let o=t.url,s=t.method||"get",a=t.data||{},i={};return"post"==s&&(i={"Content-Type":"application/json"}),new Promise(((t,n)=>{e.index.request({url:"http://funtool.cloud"+o,method:s,header:i,data:a,success(o){const s=o;if(console.log(s.statusCode),200==s.statusCode)t(s.data);else switch(e.index.clearStorageSync(),s.statusCode){case 401:e.index.showModal({title:"提示",content:"请登录",showCancel:!1,success(t){setTimeout((()=>{e.index.navigateTo({url:"/pages/login/index"})}),1e3)}});break;case 404:e.index.showToast({title:"请求地址不存在...",duration:2e3});break;default:e.index.showToast({title:"请重试...",duration:2e3})}},fail(t){console.log(t),-1!==t.errMsg.indexOf("request:fail")?e.wx$1.showToast({title:"网络异常",icon:"error",duration:2e3}):e.wx$1.showToast({title:"未知异常",duration:2e3}),n(t)},complete(){e.index.hideLoading(),e.index.hideToast()}})})).catch((e=>{}))};
